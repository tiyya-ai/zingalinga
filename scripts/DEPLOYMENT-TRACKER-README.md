# 🚀 دليل متتبع النشر - Zinga Linga

## 📋 نظرة عامة

متتبع النشر هو أداة تفاعلية تساعدك في تتبع وتنفيذ خطوات نشر موقع Zinga Linga خطوة بخطوة. يوفر واجهة سهلة الاستخدام لضمان عدم تفويت أي خطوة مهمة في عملية النشر.

## 🎯 المميزات

- ✅ تتبع تقدم النشر خطوة بخطوة
- 🔄 حفظ واستعادة التقدم تلقائياً
- 🤖 تنفيذ الأوامر تلقائياً أو يدوياً
- 📊 سجل مفصل لجميع خطوات النشر
- 🚀 إنشاء سكريبت نشر تلقائي مخصص
- 🌐 دعم النشر على VPS و GitHub Actions

## 🚀 البدء السريع

### 1. تشغيل متتبع النشر

```bash
# الطريقة الأولى: استخدام npm script
npm run deploy:track

# الطريقة الثانية: تشغيل مباشر
node deployment-tracker.js
```

### 2. الخيارات المتاحة

عند تشغيل المتتبع، ستحصل على القائ��ة التالية:

```
📋 خيارات النشر:
1. عرض جميع الخطوات
2. تنفيذ الخطوة التالية
3. تنفيذ خطوة محددة
4. عرض سجل النشر
5. إعادة تعيين التقدم
6. إنشاء سكريبت نشر تلقائي
7. خروج
```

## 📝 خطوات النشر

### الخطوات المحلية (Local Steps)

1. **🔧 تحضير التطبيق للنشر**
   - تثبيت التبعيات: `npm install`
   - بناء المشروع: `npm run build`

2. **📦 إنشاء حزمة النشر**
   - ضغط الملفات: `tar -czf zinga-linga-vps.tar.gz .next node_modules package.json package-lock.json public`

3. **⬆️ رفع الحزمة إلى VPS**
   - نقل الملفات: `scp zinga-linga-vps.tar.gz root@109.199.106.28:/root/`

### خطوات VPS

4. **🔐 الاتصال بـ VPS**
   - الدخول عبر SSH: `ssh root@109.199.106.28`

5. **📁 إعداد مجلد التطبيق**
   - إنشاء المجلد: `mkdir -p /var/www/zinga-linga`
   - الانتقال للمجلد: `cd /var/www/zinga-linga`
   - استخراج الملفات: `tar -xzf /root/zinga-linga-vps.tar.gz`

6. **🔧 تثبيت التبعيات على VPS**
   - تثبيت الحزم: `npm install --production`

7. **🚀 تشغيل التطبيق مع PM2**
   - تثبيت PM2: `npm install -g pm2`
   - تشغيل التطبيق: `pm2 start npm --name "zinga-linga" -- start`
   - حفظ الإعدادات: `pm2 save`

8. **🧹 تنظيف الملفات المؤقتة**
   - حذف الحزمة: `rm /root/zinga-linga-vps.tar.gz`

9. **🌐 إعداد NGINX (اختياري)**
   - تثبيت NGINX وتكوينه

10. **✅ التحقق من النشر**
    - فحص حالة PM2: `pm2 status`
    - عرض السجلات: `pm2 logs zinga-linga`
    - اختبار الوصول: `curl http://109.199.106.28:3000`

## 🤖 النشر التلقائي

### إنشاء سكريبت نشر تلقائي

```bash
# من خلال المتتبع
npm run deploy:track
# ثم اختر الخيار 6

# أو استخدام السكريبت المُنشأ مسبقاً
npm run deploy:auto
```

### تحضير حزمة النشر فقط

```bash
npm run deploy:prepare
```

## 📊 تتبع التقدم

### حفظ التقدم

يتم حفظ التقدم تلقائياً في ملف `deployment-progress.json` والذي يحتوي على:

- حالة كل خطوة (مكتملة أم لا)
- الخطوة الحالية
- سجل جميع العمليات
- تاريخ آخر تحديث

### استعادة التقدم

عند إعادة تشغيل المتتبع، يتم تحميل التقدم المحفوظ تلقائياً.

### إعادة تعيين التقدم

يمكنك إعادة تعيين جميع الخطوات والبدء من جديد باختيار الخيار 5.

## 🔧 التخصيص

### تعديل إعدادات VPS

يمكنك تعديل الإعدادات التالية في ملف `deployment-tracker.js`:

```javascript
// إعدادات VPS الافتراضية
const defaultVPS = {
  ip: '109.199.106.28',
  user: 'root',
  appName: 'zinga-linga',
  deployPath: '/var/www/zinga-linga'
};
```

### إضافة خطوات مخصصة

يمكنك إضافة خطوات جديدة في مصفوفة `this.steps`:

```javascript
{
  id: 11,
  title: "خطوة مخصصة",
  description: "وصف الخطوة",
  commands: ["أمر مخصص"],
  completed: false,
  vps: true, // إذا كانت تتطلب VPS
  optional: true // إذا كانت اختيارية
}
```

## 🛠️ استكشاف الأخطاء

### مشاكل شائعة

1. **خطأ في الاتصال بـ VPS**
   - تأكد من صحة IP و SSH key
   - تحقق من إعدادات الشبكة

2. **فشل في بناء المشروع**
   - تأكد من تثبيت جميع التبعيات
   - تحقق من وجود أخطاء في الكود

3. **مشاكل PM2**
   - تأكد من تثبيت PM2 على VPS
   - تحقق من توفر المنفذ 3000

### عرض السجلات

```bash
# سجلات PM2
pm2 logs zinga-linga

# حالة PM2
pm2 status

# إعادة تشغيل التطبيق
pm2 restart zinga-linga
```

## 🔐 الأمان

### إعدادات SSH

تأكد من:
- استخدام مفاتيح SSH بدلاً من كلمات المرور
- تقييد الوصول للمنافذ المطلوبة فقط
- تحديث النظام بانتظام

### متغيرات البيئة

احرص على حماية:
- مفاتيح API
- كلمات مرور قواعد البيانات
- إعدادات الإنتاج الحساسة

## 📞 الدعم

في حالة مواجهة مشاكل:

1. تحقق من سجل النشر في المتتبع
2. راجع ملف `deployment-progress.json`
3. تأكد من صحة جميع الإعدادات
4. اتصل بفريق التطوير للمساعدة

## 🎉 نصائح للنجاح

- ✅ اختبر النشر على بيئة تطوير أولاً
- ✅ احتفظ بنسخة احتياطية قبل النشر
- ✅ راقب أداء التطبيق بعد النشر
- ✅ استخدم HTTPS في الإنتاج
- ✅ فعّل المراقبة والتنبيهات

---

**تم إنشاؤه بواسطة فريق Zinga Linga** 🚀